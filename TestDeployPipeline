pipeline {
    agent any
 stages {
        stage('Invoke Step Function') {
            steps {
                script {
                    def stateMachineArn = 'arn:aws:states:us-east-1:471774948982:stateMachine:grap-test'
                    def inputPayload = '{"key": "value"}'  // Replace with your input JSON payload

                    def awsCliCmd = "aws stepfunctions start-execution --state-machine-arn ${stateMachineArn} --input '${inputPayload}'"
                    def awsCliOutput = sh(script: awsCliCmd, returnStdout: true).trim()

                    echo "AWS CLI Output: ${awsCliOutput}"
                }
            }
        }
    }
}

